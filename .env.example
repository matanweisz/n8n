# =============================================================================
# N8N PRODUCTION ENVIRONMENT CONFIGURATION
# =============================================================================

# =============================================================================
# SECURITY KEYS - GENERATE THESE VALUES!
# =============================================================================
# Generate with: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE-ME-generate-with-openssl-rand-base64-32
N8N_USER_MANAGEMENT_JWT_SECRET=CHANGE-ME-generate-with-openssl-rand-base64-32
N8N_RUNNERS_AUTH_TOKEN=CHANGE-ME-generate-with-openssl-rand-base64-32

# Generate with: openssl rand -hex 16
N8N_ENCRYPTION_KEY=CHANGE-ME-generate-with-openssl-rand-hex-16

# =============================================================================
# DOMAIN CONFIGURATION - UPDATE WITH YOUR DOMAINS
# =============================================================================
N8N_HOST=n8n.yourdomain.com
N8N_WEBHOOK_URL=https://api.yourdomain.com/
N8N_EDITOR_BASE_URL=https://n8n.yourdomain.com

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
PGDATA=/var/lib/postgresql/data

# N8N Database Connection
DB_TYPE=postgresdb
DB_POSTGRESDB_HOST=postgres
DB_POSTGRESDB_DATABASE=n8n
DB_POSTGRESDB_USER=n8n
DB_POSTGRESDB_PASSWORD=CHANGE-ME-same-as-POSTGRES_PASSWORD-above

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PORT=6379
QUEUE_NAME_PREFIX=bull
QUEUE_NAME=jobs

# =============================================================================
# N8N CORE CONFIGURATION
# =============================================================================
N8N_PROTOCOL=https
N8N_LOG_LEVEL=info
N8N_DIAGNOSTICS_ENABLED=false
N8N_METRICS=false
N8N_METRICS_PREFIX=n8n_
N8N_BASIC_AUTH_ACTIVE=false
N8N_USER_FOLDER=/home/node/.n8n
N8N_SECURE_COOKIE=true
N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=false

# =============================================================================
# QUEUE MODE CONFIGURATION (REQUIRED FOR WORKERS)
# =============================================================================
EXECUTIONS_MODE=queue
QUEUE_BULL_REDIS_HOST=redis
QUEUE_HEALTH_CHECK_ACTIVE=true
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true

# =============================================================================
# TASK RUNNER CONFIGURATION
# =============================================================================
N8N_RUNNERS_AUTH_TOKEN=CHANGE-ME-same-as-above
N8N_TASK_BROKER_URL=redis://redis:6379
N8N_COMMAND_RESPONSE_URL=redis://redis:6379
N8N_TASK_BROKER_PORT=6379

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================
N8N_CONCURRENCY_PRODUCTION_LIMIT=10
N8N_QUEUE_BULL_GRACEFULSHUTDOWNTIMEOUT=300
N8N_GRACEFUL_SHUTDOWN_TIMEOUT=300

# =============================================================================
# EXTERNAL INTEGRATIONS
# =============================================================================
# Puppeteer Configuration for Web Scraping
NODE_FUNCTION_ALLOW_EXTERNAL=ajv,ajv-formats,puppeteer
PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium

# =============================================================================
# DOCKER COMPOSE CONFIGURATION
# =============================================================================
COMPOSE_PROJECT_NAME=n8n-production